<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1.0, width=device-width" />

    <meta name="title" content="StoryTiling">
    <meta name="description" content="StoryTiling: Meaningful video gifts">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-192554903-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-192554903-1');
        gtag('config', 'AW-10970979966');
    </script>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://storytiling.com"/>
    <meta property="og:site_name" content="StoryTiling"/>
    <meta property="og:title" content="StoryTiling: Meaningful video gifts">
    <meta property="og:description" content="Personalised video gifts for birthdays, thank you, congrats and more.">
    <meta property="og:image" content="https://firebasestorage.googleapis.com/v0/b/storytiling-video-message.appspot.com/o/logo%2Fog_transparent.png?alt=media&token=d3d34a66-2ca3-43d1-8079-1ac90840cd91"/>

    <!-- Twitter -->
    <meta name="twitter:title" content="StoryTiling: Meaningful video gifts"/>
    <meta name="twitter:image" content="https://firebasestorage.googleapis.com/v0/b/storytiling-video-message.appspot.com/o/logo%2Fog_transparent.png?alt=media&token=d3d34a66-2ca3-43d1-8079-1ac90840cd91"/>
    <meta name="twitter:url" content="https://storytiling.com"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:description" content="Personalised video gifts for birthdays, thank you, congrats and more."/>

    <!-- iOS meta tags & icons -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="StoryTiling: Meaningful video gifts">
    <link rel="apple-touch-icon" href="icons/Icon-192.png">

    <base href="/">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="favicon.png"/>

    <title>StoryTiling: Meaningful video gifts</title>
    <link rel="manifest" href="manifest.json">
    <script>
        // The value below is injected by flutter build, do not touch.
        var serviceWorkerVersion = '3372833654';
    </script>
    <script src="flutter.js" defer></script>

    <!-- Detect mobile browser -->
    <script type='text/javascript'>
        window.isMobileBrowser = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    </script>

    <!-- Smartlook Tracking Code -->
    <script type='text/javascript'>
      if(window.isMobileBrowser === false){
        window.smartlook||(function(d) {
        var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
        var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
        c.charset='utf-8';c.src='https://web-sdk.smartlook.com/recorder.js';h.appendChild(c);
        })(document);
        smartlook('init', '165eaa537ca60123ff627c45c732b6d217664fac', { region: 'eu' });
      }
    </script>
</head>
<body bgcolor="#FFF8F3">

<!-- logo -->
<div id="logo" style="text-align:center;margin-top:32px;">
    <img src="icons/logo.png" alt="Logo..." height="30"/>
</div>

<!-- loader -->
<div id="loading">
    <style>
      body {
        inset: 0; overflow: hidden;
        margin: 0; padding: 0;
        position: fixed;
      }
      #loading {
        align-items: center;
        display: flex;
        height: 100%;
        justify-content: center;
        width: 100%;
      }
      #loading img {
        animation: 1s ease-in-out 0s infinite alternate breathe;
        opacity: .66;
        transition: opacity .4s;
      }
      #loading.main_done img {
        opacity: 1;
      }
      #loading.init_done img {
        animation: .33s ease-in-out 0s 1 forwards zooooom;
        opacity: .05;
      }
      @keyframes breathe { from { transform: scale(1) } to { transform: scale(0.95)}}
      @keyframes zooooom { from { transform: scale(1) } to { transform: scale(10)}}
    </style>
    <img src="icons/Icon-192.png" alt="Loading..." />
</div>
<script>
    window.addEventListener('load', function() {
        if ('serviceWorker' in navigator) {
            if ('Notification' in window) {
                // notifications are supported in browser
                // register firebase-messaging service worker
                navigator.serviceWorker.register('/firebase-messaging-sw.js');
            }
        }

      var loading = document.querySelector('#loading');
      var logo = document.querySelector("#logo");
      _flutter.loader.loadEntrypoint({
        serviceWorker: {
          serviceWorkerVersion: serviceWorkerVersion,
        }
      }).then(function(engineInitializer) {
        loading.classList.add('main_done');
        return engineInitializer.initializeEngine();
      }).then(function(appRunner) {
        loading.classList.add('init_done');
        return appRunner.runApp();
      }).then(function(app) {
        // Wait a few milliseconds so users can see the "zoooom" animation
        // before getting rid of the "loading" div.
        window.setTimeout(function() {
            // set the dataset to canvas element
            if(window.isMobileBrowser === false){
                // https://stackoverflow.com/questions/73492855/how-to-put-an-attribute-to-canvas-element-for-flutter-web
                // https://web.developer.smartlook.com/docs/canvas#javascript
                const canvasElement = document.querySelector("flt-glass-pane").shadowRoot.querySelector("canvas");
                canvasElement.dataset.sl = "canvas-mq";
            }

            // remove the logo div
            logo.remove();
            // remove the loading div
            loading.remove();
        }, 200);
      });
    });
</script>
</body>
</html>